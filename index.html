<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <title>Dashboard ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á & ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="h-screen flex bg-gray-100">

  <!-- Sidebar -->
  <aside class="w-64 bg-white shadow-md hidden md:block">
    <div class="p-4 text-xl font-bold border-b">üìä Dashboard</div>
    <nav class="p-4">
      <ul class="space-y-2">
        <li><a href="#" class="block px-2 py-2 rounded hover:bg-gray-100">Overview</a></li>
        <li><a href="#" class="block px-2 py-2 rounded hover:bg-gray-100">‡∏ó‡∏≠‡∏á & ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</a></li>
      </ul>
    </nav>
  </aside>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col">
    <!-- Navbar -->
    <header class="bg-white shadow-md p-4 flex justify-between items-center">
      <button id="menuBtn" class="md:hidden text-gray-600">‚ò∞</button>
      <h1 class="text-2xl font-bold">‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥ & ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</h1>
      <div class="flex items-center space-x-4">
        <span class="text-gray-600">Admin</span>
      </div>
    </header>

    <main class="p-6 overflow-y-auto flex-1">
      <!-- Cards -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
        <div class="bg-white shadow rounded-lg p-4">
          <h2 class="text-gray-600">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á (USD / oz)</h2>
          <p id="goldPrice" class="text-2xl font-bold text-yellow-600">-</p>
        </div>
        <div class="bg-white shadow rounded-lg p-4">
          <h2 class="text-gray-600">‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥</h2>
          <p id="temp" class="text-2xl font-bold text-red-600">- ¬∞C</p>
        </div>
        <div class="bg-white shadow rounded-lg p-4">
          <h2 class="text-gray-600">‡∏•‡∏° / ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô</h2>
          <p id="windHum" class="text-xl font-medium text-gray-700">-</p>
        </div>
      </div>

      <!-- ‡∏Å‡∏£‡∏≤‡∏ü‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á (mock) -->
      <div class="bg-white shadow rounded-lg p-4 mb-6">
        <h2 class="mb-2 text-gray-700">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á 7 ‡∏ß‡∏±‡∏ô</h2>
        <canvas id="goldChart"></canvas>
      </div>
    </main>
  </div>

  <!-- Sidebar mobile -->
  <div id="mobileMenu" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
    <div class="w-64 bg-white h-full shadow-md p-4">
      <button id="closeMenu" class="text-gray-600 mb-4">‚úï</button>
      <nav>
        <ul class="space-y-2">
          <li><a href="#" class="block px-2 py-2 rounded hover:bg-gray-100">Overview</a></li>
          <li><a href="#" class="block px-2 py-2 rounded hover:bg-gray-100">‡∏ó‡∏≠‡∏á & ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <script>
    const menuBtn = document.getElementById("menuBtn");
    const mobileMenu = document.getElementById("mobileMenu");
    const closeMenu = document.getElementById("closeMenu");
    menuBtn.addEventListener("click", () => mobileMenu.classList.remove("hidden"));
    closeMenu.addEventListener("click", () => mobileMenu.classList.add("hidden"));

    async function fetchGoldPrice() {
      try {
        // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Metals-API
        const apiKey = "YOUR_METALS_API_KEY"; // ‡πÉ‡∏™‡πà API Key ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
        const res = await fetch(`https://metals-api.com/api/latest?access_key=${apiKey}&base=USD&symbols=XAU`);
        const j = await res.json();
        const price = j.rates.XAU;
        document.getElementById("goldPrice").textContent = price.toFixed(2) + " USD/oz";
        return price;
      } catch (err) {
        console.error("gold error", err);
        document.getElementById("goldPrice").textContent = "Error";
      }
    }

    async function fetchWeather(lat, lon) {
      try {
        // ‡πÉ‡∏ä‡πâ Open-Meteo ‡∏ü‡∏£‡∏µ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á API key
        const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`;
        const res = await fetch(url);
        const j = await res.json();
        const w = j.current_weather;
        document.getElementById("temp").textContent = w.temperature + " ¬∞C";
        document.getElementById("windHum").textContent = `Wind ${w.windspeed} m/s, Humidity N/A`;
      } catch (err) {
        console.error("weather error", err);
        document.getElementById("temp").textContent = "Error";
      }
    }

    // ‡∏Å‡∏£‡∏≤‡∏ü ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á (mock data)
    const ctx = document.getElementById("goldChart").getContext("2d");
    const goldChart = new Chart(ctx, {
      type: "line",
      data: {
        labels: ["6d ago","5d ago","4d ago","3d ago","2d ago","Yesterday","Today"],
        datasets: [{
          label: "Gold (USD/oz)",
          data: [1800, 1820, 1810, 1830, 1840, 1850, 1855],
          borderColor: "#D4AF37",
          fill: false,
          tension: 0.3
        }]
      }
    });

    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    (async () => {
      await fetchGoldPrice();
      // ‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á lat/lon ‡∏Ç‡∏≠‡∏á ‡∏Å‡∏ó‡∏°.
      fetchWeather(13.736717, 100.523186);
    })();
  </script>
</body>
</html>
